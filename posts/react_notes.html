<!DOCTYPE html>
<html lang="en">
  <head>
    <title>==> React's Notes | Sudo's Notes</title>
    <meta charset="utf-8" />
    <meta http-equiv="content-type" content="text/html;" />
    <meta name="viewport" content="initial-scale=1.0 maximum-scale=1.0" />
    <meta property='og:image' content='https://thunguyen1012.github.io/img/default.jpg'><meta name='description' content='In deep of react'>
    <meta name="theme-color" content="#ffffff" />
    <meta
      name="google-site-verification"
      content="google-site-verification=kcDFRw1y16XjxYUB-datjB6MQB-CsjgE9h6lCalynC4"
    />

    <!-- Google Analytics -->
    <script>
      window.ga =
        window.ga ||
        function () {
          (ga.q = ga.q || []).push(arguments);
        };
      ga.l = +new Date();
      ga("create", "UA-120719369-1", "auto");
      ga("send", "pageview");
    </script>
    <script async src="https://www.google-analytics.com/analytics.js"></script>
    <!-- End Google Analytics -->
    <link href="../css/theme-dark.min.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../css/highlight/railscasts.css" />
    <script src="../js/highlight.pack.js"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
    <div class="header">
      <a href="/"><span class="avatar"></span></a>
    </div>
    <div class="container">
      <div class="main">
        <h1>==> React's Notes</h1>
        <h2><a href="#superprops)" aria-hidden="true" class="anchor" id="superprops)"></a><code>super(props)</code></h2>
<p><em>T·∫°i sao l·∫°i g·ªçi <code>super</code>? Kh√¥ng c√≥ ƒë∆∞·ª£c kh√¥ng? Kh√¥ng truy·ªÅn <code>props</code> c√≥ ƒë∆∞·ª£c kh√¥ng? C√≤n tham s·ªë n√†o kh√°c kh√¥ng?</em></p>
<pre><code class="language-javascript">class Note extends React.Component {
  constructor(props) {
    super(props);
  }
}
</code></pre>
<p>B·∫°n kh√¥ng th·ªÉ d√πng <code>this</code> tr∆∞·ªõc khi g·ªçi <code>super()</code>
N·∫øu b·∫°n kh√¥ng truy·ªÅn <em>props</em> trong <code>super()</code> th√¨ b·∫°n v·∫´n c√≥ th·ªÉ truy c·∫≠p <code>this.props</code> trong lifecycle. React lu√¥n g√°n <em>props</em> cho th·ª±c th·ªÉ c·ªßa component sau khi kh·ªüi t·∫°o.</p>
<pre><code class="language-javascript">// Inside React
const instance = new YourComponent(props);
instance.props = props;
</code></pre>
<p>V·∫≠y c√≥ c·∫ßn truy·ªÅn g·ªçi d·∫°ng <code>super(props)</code> kh√¥ng? C·∫ßn khi b·∫°n truy c·∫≠p <code>this.props</code> trong constructor.</p>
<p>C√≥ c√≤n tham s·ªë n√†o c√≥ th·ªÉ truy·ªÅn cho <code>super()</code> kh√¥ng? C√≤n, ƒë√≥ l√† <code>context</code></p>
<h2><a href="#react-ƒë·ªëi-x·ª≠-v·ªõi-functional-component-v√†-class-component-nh∆∞-th·∫ø-n√†o" aria-hidden="true" class="anchor" id="react-ƒë·ªëi-x·ª≠-v·ªõi-functional-component-v√†-class-component-nh∆∞-th·∫ø-n√†o"></a>React ƒë·ªëi x·ª≠ v·ªõi functional component v√† class component nh∆∞ th·∫ø n√†o?</h2>
<p>Gi·∫£ ƒë·ªãnh ch√∫ng ta c√≥ <code>Greeting</code> component:</p>
<ul>
<li>Theo functional component</li>
</ul>
<pre><code class="language-javascript">function Greeting() {
  return &lt;p&gt;Hello&lt;/p&gt;;
}
</code></pre>
<ul>
<li>Theo class</li>
</ul>
<pre><code class="language-javascript">class Greeting extends React.Component {
  render() {
    return &lt;p&gt;Hello&lt;/p&gt;;
  }
}
</code></pre>
<p>V√† s·ª≠ d·ª•ng</p>
<pre><code class="language-javascript">// Class or function ‚Äî whatever.
&lt;Greeting /&gt;
</code></pre>
<p>B√™n trong react s·∫Ω l√†</p>
<pre><code class="language-javascript">// For functional
const result = Greeting(props); // &lt;p&gt;Hello&lt;/p&gt;

// For class
// Inside React
const instance = new Greeting(props); // Greeting {}
const result = instance.render(); // &lt;p&gt;Hello&lt;/p&gt;
</code></pre>
<p>Ch√∫ng ta s·∫Ω ƒëi qua <code>new, this, class, arrow function, prototype, __proto__, instanceOf</code> ƒë·ªÉ n√≥i v·ªÅ s·ª± kh√°c bi·ªát n√†y.</p>
<h3><a href="#new" aria-hidden="true" class="anchor" id="new"></a><code>new</code></h3>
<p>B·∫°n c√≥ th·ªÉ d√πng b·∫•t k·ª≥ function n√†o theo d·∫°ng m·ªôt class constructor b·ª°i th√™m <code>new</code> tr∆∞·ªõc l·ªùi g·ªçi.</p>
<pre><code class="language-javascript">// Just a function
function Person(name) {
  this.name = name;
}

var fred = new Person('Fred'); // case1 ‚úÖ Person {name: 'Fred'}
var george = Person('George'); // case2 üî¥ Won‚Äôt work, george = undefined
</code></pre>
<p>Case2, <code>this</code> tr·ªè ƒë·∫øn window (global) hay <code>undefined</code>. C√≤n case1, s·∫Ω gi·ªëng nh∆∞: t·∫°o m·ªôt {} object, tr·ªè <code>this</code> trong h√†m <code>Person</code> t·ªõi object n√†y,..., v√† tr·∫£ n√≥ v·ªÅ. N√≥ c≈©ng cung c·∫•p <code>Person.prototype</code> ƒë·∫øn <code>fred</code> object.</p>
<p>N·∫øu b·∫°n g·ªçi t·∫°o th·ª±c th·ªÉ c·ªßa m·ªôt class m√† qu√™n <code>new</code> th√¨ sao? S·∫Ω c√≥ l·ªói.</p>
<table>
<thead>
<tr>
<th></th>
<th>with <code>new</code></th>
<th>without <code>new</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>class</td>
<td>ok</td>
<td>error</td>
</tr>
<tr>
<td>function</td>
<td>ok</td>
<td>ok</td>
</tr></tbody></table>
<p>=&gt; React s·∫Ω lu√¥n th·ª±c thi t·∫°o m·ªõi th·ª±c th·ªÉ v·ªõi <code>new</code>? Kh√¥ng, v√¨ ch√∫ng ta s·∫Ω g·∫∑p v·∫•n ƒë·ªÅ <code>this</code> trong functional component (k·ªÉ c·∫£ d·∫°ng arrow function) - <code>this</code> ·ªü ƒë√¢y l√† kh√¥ng c·∫ßn thi·∫øt v√† kh√¥ng tr·ªè ƒë·∫øn th·ª±c th·ªÉ ch√∫ng ta mu·ªën (arrow function).</p>
<p>V·∫≠y kh√¥ng th·ªÉ <code>new</code> cho arrow function. L√†m sao ƒë·ªÉ detect arrow function?</p>
<pre><code class="language-javascript">(() =&gt; {}).prototype // undefined
(function() {}).prototype // {constructor: f}
</code></pre>
<p>Note: ch·∫°y v·ªõi babel th√¨ k·∫øt qu·∫£ kh√¥ng nh∆∞ th·∫ø.</p>
<p>Kh√¥ng th·ªÉ <code>new</code> cho functional component, c√°i tr·∫£ v·ªÅ gi√° tr·ªã nguy√™n b·∫£n: chu·ªói, s·ªë,..</p>
<pre><code class="language-javascript">function Greeting() {
  return 'Hello';
}

Greeting(); // ‚úÖ 'Hello'
new Greeting(); // üò≥ Greeting {}
</code></pre>
<p>Note: m·ªôt trick ·ªü ƒë√¢y, d√πng <code>new</code> ƒë·ªÉ thay ƒë·ªïi gi√° tr·ªã tr·∫£ v·ªÅ c·ªßa 1 h√†m khi ƒë∆∞·ª£c g·ªçi v·ªõi <code>new</code>.</p>
<pre><code class="language-javascript">// Created lazily
var zeroVector = null;

function Vector(x, y) {
  if (x === 0 &amp;&amp; y === 0) {
    if (zeroVector !== null) {
      // Reuse the same instance
      return zeroVector;
    }
    zeroVector = this;
  }
  this.x = x;
  this.y = y;
}

var a = new Vector(1, 1);
var b = new Vector(0, 0);
var c = new Vector(0, 0); // üò≤ b === c
</code></pre>
<p>Luy√™n thuy√™n qu√°, c√¢u h·ªèi v·∫´n t·ªìn t·∫°i, nh·∫Øc l·∫°i: L√†m sao React bi·∫øt d√πng <code>new</code> cho class component v√† kh√¥ng d√πng <code>new</code> cho functional component (k·ªÉ c·∫£ ƒë√£ ƒë∆∞·ª£c parsed b·ª°i babel)?</p>
<p>D·ª±a v√†o <code>prorotype</code> chain.</p>
<pre><code class="language-javascript">class Greeting extends React.Component {
  render() {
    return &lt;p&gt;Hello&lt;/p&gt;;
  }
}

let c = new Greeting();
console.log(c.__proto__); // Greeting.prototype
console.log(c.__proto__.__proto__); // React.Component.prototype
console.log(c.__proto__.__proto__.__proto__); // Object.prototype

c.render();      // Found on c.__proto__ (Greeting.prototype)
c.setState();    // Found on c.__proto__.__proto__ (React.Component.prototype)
c.toString();    // Found on c.__proto__.__proto__.__proto__ (Object.prototype)

console.log(Greeting.prototype instanceof React.Component);
// greeting
//   .__proto__ ‚Üí Greeting.prototype (üïµÔ∏è‚Äç We start here)
//     .__proto__ ‚Üí React.Component.prototype (‚úÖ Found it!)
//       .__proto__ ‚Üí Object.prototype
</code></pre>
<p>N√≥i v·∫≠y ch·ª© s·∫Ω ch·∫øt khi c√≥ nhi·ªÅu phi√™n b·∫£n React tr√™n trang - instant ƒë∆∞·ª£c t·∫°o b·ª°i <code>React.Component</code> kh√°c v·ªõi c√°i n√≥ ƒëi ki·ªÉm tra. React d√πng c√°ch kh√°c: d√πng flag</p>
<pre><code class="language-javascript">// Inside React
class Component {}
Component.prototype.isReactComponent = {};

// We can check it like this
class Greeting extends Component {}
console.log(Greeting.prototype.isReactComponent); // ‚úÖ Yes
</code></pre>
<p>C√¢u h·ªèi ƒë·∫∑t ra: t·∫°i sao l·∫°i ƒë∆∞a v√†o <code>prototype</code>? V√¨ c√≥ th·ªÉ m·∫•t khi m√¨nh ƒë·ªãnh nghƒ©a class v√† kh√¥ng mu·ªën copy c√°c thu·ªôc t√≠nh tƒ©nh.</p>
<p>ƒê√¥i khi code ch·∫°y ngon, ƒë∆°n gi·∫£n th√¨ t·ªët h∆°n l√† c·ªë code theo b√†i b·∫£n.</p>
<h2><a href="#how-does-setstate-know-what-to-do" aria-hidden="true" class="anchor" id="how-does-setstate-know-what-to-do"></a>How Does setState Know What to Do?</h2>
<h2><a href="#why-do-react-hooks-rely-on-call-order" aria-hidden="true" class="anchor" id="why-do-react-hooks-rely-on-call-order"></a>Why Do React Hooks Rely on Call Order?</h2>
<h2><a href="#why-isnt-x-a-hook?" aria-hidden="true" class="anchor" id="why-isnt-x-a-hook?"></a>Why Isn‚Äôt X a Hook?</h2>
<h2><a href="#ref" aria-hidden="true" class="anchor" id="ref"></a>REF</h2>
<ul>
<li><a href="https://overreacted.io">https://overreacted.io</a></li>
</ul>
 <div class='other-tags'><b>Tags:</b> <a class='topic-tag' href='/tags/react.html'>react</a><a class='topic-tag' href='/tags/fundamental.html'>fundamental</a></div>
      </div>
    </div>
  </body>
</html>
